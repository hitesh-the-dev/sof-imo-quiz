<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SOF IMO 2024 – Level 1 Quiz</title>

<style>
body{
    font-family:Segoe UI, sans-serif;
    background:linear-gradient(135deg,#667eea,#764ba2);
    margin:0;
}
.container{
    max-width:900px;
    margin:25px auto;
    background:#fff;
    border-radius:12px;
    padding:25px 30px;
    box-shadow:0 20px 45px rgba(0,0,0,.25);
}
h1{text-align:center;color:#4b0082;}
.timer{
    display:flex;
    justify-content:space-between;
    font-weight:600;
    color:#c0392b;
}
.question{font-weight:600;margin:15px 0;}
.options label{
    display:block;
    border:2px solid #ddd;
    border-radius:8px;
    padding:10px;
    margin-bottom:10px;
    cursor:pointer;
}
.options label:hover{
    background:#f3f0ff;
    border-color:#6c5ce7;
}
.nav{
    display:flex;
    justify-content:space-between;
    margin-top:20px;
}
button{
    padding:10px 18px;
    border:none;
    border-radius:8px;
    font-weight:bold;
    cursor:pointer;
}
.btn{background:#6c5ce7;color:#fff;}
.submit{background:#00b894;color:#fff;}
.submit:disabled{
    background:#aaa;
    cursor:not-allowed;
}
.result{
    display:none;
    margin-top:25px;
    background:#f8f9fa;
    padding:20px;
    border-radius:10px;
}
.correct{color:green;font-weight:600;}
.wrong{color:red;font-weight:600;}
</style>
</head>

<body>
<div class="container">
<h1>SOF IMO 2024 – Level 1</h1>

<div class="timer">
  <div>Total Time Left: <span id="globalTimer">30:00</span></div>
  <div>Question Time: <span id="qTimer">0s</span></div>
</div>

<div id="quiz"></div>

<div class="nav">
  <button class="btn" onclick="prev()">⬅ Prev</button>
  <button class="btn" onclick="next()">Next ➡</button>
  <button class="submit" id="submitBtn" onclick="submitQuiz(false)" disabled>
    Submit
  </button>
</div>

<div class="result" id="result"></div>
</div>

<script>
const questions=[
`Mrs Sharma wrote a 4-digit number on the blackboard.
Anshu: "It is a 4-digit number but not the least."
Vishal: "It is less than the largest 4-digit number but greater than 9997."
Badal: "Its hundreds place digit is 9."
If all of the three students said the truth, then find the number.`,
`Which of the following statements is CORRECT?
P. The expanded form of largest four digit number is 9000 + 900 + 90 + 9.
Q. The smallest four digit number that can be formed by using the digits 3, 0, 9 and 5 (using each digit only once) is 3059.
R. The place value of digit 2 in 7241 is 3 times the place value of digit 4 in 7241.`,
`Which of the given abacuses shows the number less than 1345?`,
`Kavita wants to choose a balloon with smallest number written on it.`,
`If the beads at tens place and thousands place on the given abacus get interchanged, then which option shows the expanded form of new number?`
];

const options=[
["9967","9998","9876","Can’t say"],
["P and Q only","Q and R only","P and R only","All P, Q and R"],
["Option A","Option B","Option C","Option D"],
["Q","T","P","R"],
[
"4000 + 600 + 50 + 3",
"4000 + 300 + 50 + 6",
"5000 + 600 + 40 + 3",
"5000 + 300 + 40 + 6"
]
];

// Official answers
const answers=[1,0,3,0,2];

let idx=0;
let responses=Array(5).fill(null);
let qTimes=Array(5).fill(0);
let qStart=Date.now();
let totalStart=Date.now();
let totalLeft=1800;
let submitted=false;

function allAnswered(){
    return responses.every(r => r !== null);
}

function updateSubmitButton(){
    document.getElementById("submitBtn").disabled = !allAnswered();
}

function render(){
let html=`<div class="question">Q${idx+1}. ${questions[idx]}</div><div class="options">`;
options[idx].forEach((o,i)=>{
html+=`
<label>
<input type="radio" name="opt"
${responses[idx]===i?"checked":""}
onclick="responses[${idx}]=${i}; updateSubmitButton();">
${o}
</label>`;
});
html+="</div>";
document.getElementById("quiz").innerHTML=html;
qStart=Date.now();
}

function saveTime(){
qTimes[idx]+=Math.floor((Date.now()-qStart)/1000);
}

function next(){ if(idx<4){ saveTime(); idx++; render(); } }
function prev(){ if(idx>0){ saveTime(); idx--; render(); } }

function submitQuiz(force){
if(submitted) return;

if(!force && !allAnswered()){
    alert("Please answer all 5 questions before submitting.");
    return;
}

submitted=true;
saveTime();
clearInterval(timer);

let correct=0;
let analysis="";
for(let i=0;i<5;i++){
let ok=responses[i]===answers[i];
if(ok) correct++;
analysis+=`
<p>
Q${i+1}:
<span class="${ok?"correct":"wrong"}">
${ok?"Correct":"Wrong"}
</span>
 | Time: ${qTimes[i]}s
 | Correct Answer: ${options[i][answers[i]]}
</p>`;
}

let totalTime=Math.floor((Date.now()-totalStart)/1000);

document.getElementById("result").innerHTML=`
<h2>Performance Analysis</h2>
<p>Correct: ${correct}</p>
<p>Wrong: ${5-correct}</p>
<p>Total Time Taken: ${totalTime} seconds</p>
<hr>${analysis}`;
document.getElementById("result").style.display="block";
}

let timer=setInterval(()=>{
if(submitted) return;
totalLeft--;
document.getElementById("globalTimer").textContent=
`${Math.floor(totalLeft/60)}:${String(totalLeft%60).padStart(2,"0")}`;
document.getElementById("qTimer").textContent=
Math.floor((Date.now()-qStart)/1000)+"s";

if(totalLeft<=0){
alert("Time over! Auto submitting.");
submitQuiz(true); // force submit
}
},1000);

render();
</script>
</body>
</html>
